<!DOCTYPE html>
<html lang="en">

<head>
  <title>Exemplo de Node.js salvando dados em base de dados MySQL usando Express.js</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>

  <div class="container mt-5">
    <% if (messages.success) { %>
      <p class="alert alert-success mb-3">
        <%- messages.success %>
      </p>
    <% } %>
    <form action="user_form" method="POST" class="form">
      <div class="mb-2">
        <input type="text" class="form-control" id="Nome_Livro" placeholder="Nome do Livro" name="Nome_Livro" />
      </div>
      <div class="mb-2">
        <input type="text" class="form-control" id="ISBN13" name="ISBN13" placeholder="ISBN13" />
      </div>
      <div class="mb-2">
        <input type="text" class="form-control" id="ISBN10" name="ISBN10" placeholder="ISBN10" />
      </div>
      <div class="mb-2">
        <input type="text" class="form-control" id="ID_Categoria" name="ID_Categoria" placeholder="ID Categoria" />
      </div>
      <div class="mb-2">
        <input type="text" class="form-control" id="ID_Autor" name="ID_Autor" placeholder="ID Autor" />
      </div>
      <div class="mb-2">
        <input type="text" class="form-control" id="ID_Editora" name="ID_Editora" placeholder="ID Editora" />
      </div>
      <div class="mb-2">
        <input type="date" class="form-control" id="Data_Pub" name="Data_Pub" placeholder="Data de Publicação" />
      </div>
      <div class="mb-2">
        <input type="text" class="form-control" id="Preco_Livro" name="Preco_Livro" placeholder="Preço do Livro" />
      </div>
      <button type="submit" class="btn btn-success store-button">Armazenar</button>
    </form>

    <!-- Lista de dados -->
    <form action="deletar" method="DELETE">
      <% if (livros && livros.length > 0) { %>
        <h2>Lista de Livros</h2>
        <table class="table table-striped table-borderless" style="margin-top: 20px;">
          <thead>
            <tr>
              <th>ID</th>
              <th>Nome do Livro</th>
              <th>ISBN13</th>
              <th>ISBN10</th>
              <th>ID Categoria</th>
              <th>ID Autor</th>
              <th>ID Editora</th>
              <th>Data de Publicação</th>
              <th>Preço do Livro</th>
              <th>Ações</th>
            </tr>
          </thead>
          <tbody>
            <% livros.forEach(function(livro) { %>
              <tr>
                <td><%= livro.ID_Livro %></td>
                <td><%= livro.Nome_Livro %></td>
                <td><%= livro.ISBN13 %></td>
                <td><%= livro.ISBN10 %></td>
                <td><%= livro.ID_Categoria %></td>
                <td><%= livro.ID_Autor %></td>
                <td><%= livro.ID_Editora %></td>
                <td><%= new Date(livro.Data_Pub).toLocaleDateString() %></td>
                <td><%= livro.Preco_Livro %></td>
                <td>
                  <form action="/deletar/<%= livro.ID_Livro %>" method="POST">
                    <button type="submit" class="btn btn-danger">Excluir</button>
                  </form>
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } %>
    </form>

    <style>
      .store-form {
        margin-bottom: 300px;
      }
    
      .store-button {
        margin-bottom: 200px;
      }
    </style>

  </div>
</body>

</html>
